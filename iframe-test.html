<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Santa Vegas Widget - –¢–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        line-height: 1.6;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.95;
      }

      .content {
        padding: 40px;
      }

      .section {
        margin-bottom: 40px;
      }

      .section h2 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 1.8rem;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
      }

      .section h3 {
        color: #764ba2;
        margin: 20px 0 10px 0;
        font-size: 1.3rem;
      }

      .instruction-box {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        padding: 20px;
        margin: 15px 0;
        border-radius: 4px;
      }

      .instruction-box ol {
        margin-left: 20px;
      }

      .instruction-box p {
        font-size: 16px;
      }

      .instruction-box ul {
        font-size: 16px;
      }

      .instruction-box li {
        margin: 10px 0;
        font-size: 16px;
      }

      .instruction-box code {
        font-size: 16px;
      }

      .code-block {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 15px 0;
        font-family: 'Monaco', 'Courier New', monospace;
        font-size: 14px;
        line-height: 1.5;
      }

      .code-block code {
        display: block;
      }

      .demo-section {
        background: #f0f0f0;
        padding: 30px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .demo-controls {
        display: flex;
        gap: 15px;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .demo-controls label {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        background: white;
        padding: 10px 20px;
        border-radius: 25px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .demo-controls label:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      .demo-controls input {
        width: 15px;
        height: 15px;
        cursor: pointer;
      }

      #widgetFrame {
        width: 100%;
        height: 256px;
        border: 2px solid #667eea;
        border-radius: 8px;
        background: rgb(34, 0, 65);
      }

      .info-box {
        background: #e7f3ff;
        border: 2px solid #2196f3;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
      }

      .info-box strong {
        color: #1976d2;
      }

      .event-log {
        background: white;
        border: 2px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        max-height: 200px;
        overflow-y: auto;
        font-family: monospace;
        font-size: 13px;
        margin-top: 20px;
      }

      .event-log .event {
        padding: 5px;
        margin: 3px 0;
        background: #f5f5f5;
        border-radius: 3px;
      }

      .event-log .event.received {
        background: #e8f5e9;
        color: #2e7d32;
      }

      .event-log .event.sent {
        background: #e3f2fd;
        color: #1565c0;
      }

      .highlight {
        background: #fff59d;
        padding: 2px 4px;
        border-radius: 3px;
      }

      .group-description {
        background: #f0f8ff;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        font-size: 14px;
      }

      .star-click-zone {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -57%);
        width: clamp(18cqw, 18cqw, 180px);
        height: clamp(18cqw, 22cqw, 180px);
        background: rgba(255, 0, 0, 0.3);
        border: 2px solid red;
        border-radius: 50%;
        }

      /* Container query –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–æ–Ω—ã –∑–≤–µ–∑–¥—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      @container (max-width: 600px) {
        #debugOverlay .star-click-zone {
          width: clamp(30cqw, 25cqw, 220px);
          height: clamp(30cqw, 30cqw, 240px);
        }
      }

      @media (max-width: 600px) {
        body {
          padding: 10px;
        }

        .header,
        .content {
          padding: 15px;
        }

        .demo-section {
          padding-left: 15px;
          padding-right: 15px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>üéÖ Santa Vegas Widget</h1>
        <p>–¢–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó</p>
      </div>

      <div class="content">
        <!-- –î–µ–º–æ —Å–µ–∫—Ü–∏—è -->
        <div class="section">
          <h2>üì∫ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –≤—ñ–¥–∂–µ—Ç–∞</h2>
          <div class="demo-section">
            <div class="demo-controls">
              <label>
                <input type="radio" name="widgetGroup" value="group1" checked />
                <span>üèÅ –ì—Ä—É–ø–∞ 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ä–µ–∂–∏–º</span>
              </label>
              <label>
                <input type="radio" name="widgetGroup" value="group2" />
                <span>üéÖ –ì—Ä—É–ø–∞ 2: –ê–∫—Ç–∏–≤–Ω–∞ –ø–∞—Å—Ö–∞–ª–∫–∞</span>
              </label>
              <label>
                <input type="radio" name="widgetGroup" value="group3" />
                <span>üéÑ –ì—Ä—É–ø–∞ 3: –°–ø—ñ–π–º–∞–Ω–∞ –ø–∞—Å—Ö–∞–ª–∫–∞</span>
              </label>
              <label>
                <input type="checkbox" id="debugZones" />
                <span>üü• –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–ª—ñ–∫–∞–±–µ–ª—å–Ω—ñ –∑–æ–Ω–∏</span>
              </label>
            </div>

            <div class="group-description" id="groupDescription">
              <p>
                <strong>–ì—Ä—É–ø–∞ 1:</strong> –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ª–æ–≥–æ—Ç–∏–ø
                Santa Vegas —ñ–∑ –ø—ñ–¥—Å–≤—ñ—á–µ–Ω–æ—é –∑—ñ—Ä–∫–æ—é. –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∑—ñ—Ä–∫—É
                –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ä–µ–∂–∏–º Group 2.
              </p>
            </div>

            <div style="position: relative; display: inline-block; width: 100%">
              <iframe
                id="widgetFrame"
                src="index.html"
                style="
                  width: 100%;
                  height: 256px;
                  border: 2px solid #667eea;
                  border-radius: 8px;
                  background: rgb(34, 0, 65);
                  display: block;
                "
              ></iframe>

              <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö –∑–æ–Ω -->
              <div
                id="debugOverlay"
                style="
                  display: none;
                  position: absolute;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  pointer-events: none;
                  z-index: 999;
                  container-type: size;
                "
              >
                <!-- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞ –∑–≤–µ–∑–¥—ã (–∫—Ä–∞—Å–Ω–∞—è) -->
                <div
                  class="star-click-zone"></div>
              </div>
            </div>

            <div class="event-log" id="eventLog">
              <div><strong>–ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π:</strong></div>
            </div>
          </div>
        </div>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—é -->
        <div class="section">
          <h2>üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–∂–µ—Ç–∞</h2>

          <div class="instruction-box">
            <h3>1. –î–æ–¥–∞–π—Ç–µ iframe –Ω–∞ –≤–∞—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É</h3>
            <p>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π URL –¥–ª—è –≤—ñ–¥–∂–µ—Ç–∞:</p>
            <div class="code-block">
              <code
                >&lt;!-- –ó –∞–Ω—ñ–º–∞—Ü—ñ—î—é –°–∞–Ω—Ç–∏ --&gt;<br />
                &lt;iframe<br />
                &nbsp;&nbsp;src="https://rocketplay-bonuses.club/santa_vegas_easter_egg/index.html?showSanta=true"<br />
                &nbsp;&nbsp;frameborder="0" scrolling="no"<br />
                &gt;&lt;/iframe&gt;<br />
                <br />
                &lt;!-- –ë–µ–∑ –°–∞–Ω—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –º—É–∑–∏–∫–∞) --&gt;<br />
                &lt;iframe<br />
                &nbsp;&nbsp;src="https://rocketplay-bonuses.club/santa_vegas_easter_egg/index.html?showSanta=false"<br />
                &nbsp;&nbsp;frameborder="0" scrolling="no"<br />
                &gt;&lt;/iframe&gt;</code
              >
            </div>
          </div>

          <div class="instruction-box">
            <h3>2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h3>

            <p style="margin-top: 15px">
              <strong>URL –ø–∞—Ä–∞–º–µ—Ç—Ä showSanta:</strong>
            </p>
            <ul>
              <li>
                <span class="highlight">?showSanta=true</span> - –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏
                –∞–Ω—ñ–º–∞—Ü—ñ—é –°–∞–Ω—Ç–∏
              </li>
              <li>
                <span class="highlight">?showSanta=false</span> - –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
                –∞–Ω—ñ–º–∞—Ü—ñ—è –°–∞–Ω—Ç–∏
              </li>
              <li>–ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –°–∞–Ω—Ç–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</li>
            </ul>
          </div>

          <div class="instruction-box">
            <h3>3. postMessage –ø–æ–¥—ñ—ó</h3>
            <p><strong>–í—ñ–¥–∂–µ—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î:</strong></p>
            <ul>
              <li>
                <code
                  >{ type: 'santaClicked', source: 'santa-vegas-widget' }</code
                >
                - –∫–ª—ñ–∫ –ø–æ –°–∞–Ω—Ç—ñ
              </li>
              <li>
                <code>{ type: 'sound_on', source: 'santa-vegas-widget' }</code>
                - –∑–≤—É–∫ –≤–∫–ª—é—á–µ–Ω–æ
              </li>
              <li>
                <code>{ type: 'sound_off', source: 'santa-vegas-widget' }</code>
                - –∑–≤—É–∫ –≤–∏–º–∫–Ω–µ–Ω–æ
              </li>
            </ul>

            <p style="margin-top: 15px"><strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥—ñ—ó:</strong></p>
            <div class="code-block">
              <code>
                interface SantaClickedEvent { type: 'santaClicked'; source:
                'santa-vegas-widget'; }<br>
                interface SoundEvent { type: 'sound_on' | 'sound_off'; source: 'santa-vegas-widget'; }
            </div>
          </div>

          <div class="instruction-box">
            <h3>4. localStorage</h3>
            <p>
              <strong>–í—ñ–¥–∂–µ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î localStorage –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É:</strong>
            </p>
            <ul>
              <li>
                <span class="highlight">santaClicked</span> - –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è
                <code>'true'</code> –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–π–º–∞–≤ –°–∞–Ω—Ç—É
              </li>
              <li>
                –¶–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —ñ –≤–ø–ª–∏–≤–∞—î –Ω–∞
                –ø–æ–≤–µ–¥—ñ–Ω–∫—É –≤—ñ–¥–∂–µ—Ç–∞
              </li>
              <li>
                –Ø–∫—â–æ <code>santaClicked === 'true'</code>, –≤—ñ–¥–∂–µ—Ç –∑–∞–≤–∂–¥–∏
                –ø–æ–∫–∞–∑—É—î —Ä–µ–∂–∏–º –ì—Ä—É–ø–∏ 3 (—Å–≤—è—Ç–∫–æ–≤–∞ –≤–µ—Ä—Å—ñ—è –±–µ–∑ –°–∞–Ω—Ç–∏ —ñ –∑—ñ—Ä–∫–∏)
              </li>
              <li>
                –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —Å–ø—ñ–π–º–∞—Ç–∏ –°–∞–Ω—Ç—É —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –≤–µ—Å—å –ø–µ—Ä—ñ–æ–¥
                –ø—Ä–æ–º–æ
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      // –û—á–∏—â–∞–µ–º localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞
      localStorage.removeItem('santaClicked')

      // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è postMessage (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤–∏–¥–∂–µ—Ç—É)
      const WIDGET_COMMANDS = {
        ACTIVATE_GROUP2: {
          type: 'activateGroup2',
        },
        SHOW_DEBUG_ZONES: value => ({
          type: 'showDebugZones',
          value: value,
        }),
      }

      // –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      const widgetFrame = document.getElementById('widgetFrame')
      const eventLog = document.getElementById('eventLog')
      const groupDescription = document.getElementById('groupDescription')
      const groupRadios = document.querySelectorAll('input[name="widgetGroup"]')
      const debugZonesCheckbox = document.getElementById('debugZones')
      const debugOverlay = document.getElementById('debugOverlay')

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL iframe —Å —É—á–µ—Ç–æ–º –≥—Ä—É–ø–ø—ã
      function updateIframeUrl() {
        const selectedGroup =
          document.querySelector('input[name="widgetGroup"]:checked')?.value ||
          'group1'

        let newUrl = 'index.html'
        const params = []

        // –ì—Ä—É–ø–ø–∞ 2 –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ postMessage
        if (selectedGroup === 'group3') {
          params.push('showSanta=false')
        }

        if (params.length > 0) {
          newUrl += '?' + params.join('&')
        }

        widgetFrame.src = newUrl

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º postMessage –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã 2 –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ iframe
        if (selectedGroup === 'group2') {
          widgetFrame.addEventListener(
            'load',
            function onIframeLoad() {
              setTimeout(() => {
                widgetFrame.contentWindow.postMessage(
                  WIDGET_COMMANDS.ACTIVATE_GROUP2,
                  '*'
                )
              }, 100)
              widgetFrame.removeEventListener('load', onIframeLoad)
            },
            { once: true }
          )
        }
      }

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ–∫–±–æ–∫—Å–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö –∑–æ–Ω
      debugZonesCheckbox.addEventListener('change', function () {
        debugOverlay.style.display = this.checked ? 'block' : 'none'
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º postMessage –≤ iframe –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∑–æ–Ω
        widgetFrame.contentWindow.postMessage(
          WIDGET_COMMANDS.SHOW_DEBUG_ZONES(this.checked),
          '*'
        )
      })

      const groupDescriptions = {
        group1:
          '<p><strong>–ì—Ä—É–ø–∞ 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ä–µ–∂–∏–º</strong></p><p>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ª–æ–≥–æ—Ç–∏–ø Santa Vegas –∑ –∑—ñ—Ä–∫–æ—é –Ω–∞ —è–∫—É –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏. –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∑—ñ—Ä–∫—É –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ä–µ–∂–∏–º Group 2.</p>',
        group2:
          "<p><strong>–ì—Ä—É–ø–∞ 2: –ê–∫—Ç–∏–≤–Ω–∞ –ø–∞—Å—Ö–∞–ª–∫–∞</strong></p><p>–ü—ñ—Å–ª—è –∫–ª—ñ–∫—É –Ω–∞ –∑—ñ—Ä–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É –∞–Ω—ñ–º–∞—Ü—ñ—é –≥—ñ—Ä–ª—è–Ω–¥ —Ç–∞ –ø—Ä–æ–ª—ñ—Ç–∞—é—á–æ–≥–æ –°–∞–Ω—Ç—É. –ì—ñ—Ä–ª—è–Ω–¥–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –Ω–∞ party –≤–µ—Ä—Å—ñ—é, –∑'—è–≤–ª—è—î—Ç—å—Å—è —Å–≤—è—Ç–∫–æ–≤–∞ –ø—ñ–¥—Å–≤—ñ—Ç–∫–∞. –ú–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫–ª—ñ–∫ –Ω–∞ –°–∞–Ω—Ç—É —â–æ–± –π–æ–≥–æ —Å–ø—ñ–π–º–∞—Ç–∏.</p><p><strong>–í–∞–∂–ª–∏–≤–æ:</strong> –ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î –ø–æ –°–∞–Ω—Ç—ñ, —Ü–µ –¥—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage (santaClicked=true). –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∑—ñ—Ä–∫—É –±—ñ–ª—å—à–µ –Ω–µ –±—É–¥–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—å –∞–Ω—ñ–º–∞—Ü—ñ—è –°–∞–Ω—Ç–∏, —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ–π–¥–µ –¥–æ –ì—Ä—É–ø–∏ 3 (–°–ø—ñ–π–º–∞–Ω–∞ –ø–∞—Å—Ö–∞–ª–∫–∞).</p>",
        group3:
          '<p><strong>–ì—Ä—É–ø–∞ 3: –°–ø—ñ–π–º–∞–Ω–∞ –ø–∞—Å—Ö–∞–ª–∫–∞</strong></p><p>–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ –°–∞–Ω—Ç—É –±—É–ª–æ —Å–ø—ñ–π–º–∞–Ω–æ (–∞–±–æ –ø—Ä–∏ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ ?showSanta=false), –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤—è—Ç–∫–æ–≤—É –≤–µ—Ä—Å—ñ—é –ª–æ–≥–æ –±–µ–∑ –∞–Ω—ñ–º–∞—Ü—ñ—ó –°–∞–Ω—Ç–∏, –∑—ñ—Ä–∫–∞ –Ω–∞ —è–∫—É –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏ –±—ñ–ª—å—à–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞.</p>',
      }

      // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
      function logEvent(message, type = 'info') {
        const eventDiv = document.createElement('div')
        eventDiv.className = `event ${type}`
        const timestamp = new Date().toLocaleTimeString('uk-UA')
        eventDiv.textContent = `[${timestamp}] ${message}`
        eventLog.appendChild(eventDiv)
        eventLog.scrollTop = eventLog.scrollHeight
      }

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã
      groupRadios.forEach(radio => {
        radio.addEventListener('change', function () {
          const selectedGroup = this.value

          // –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
          groupDescription.innerHTML = groupDescriptions[selectedGroup]

          // –û—á–∏—â–∞–µ–º –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏ localStorage –î–û –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
          if ('caches' in window) {
            caches.keys().then(cacheNames => {
              cacheNames.forEach(cacheName => {
                caches.delete(cacheName)
              })
            })
          }

          // –í–°–ï–ì–î–ê –æ—á–∏—â–∞–µ–º localStorage —Å–Ω–∞—á–∞–ª–∞
          localStorage.removeItem('santaClicked')
          //   logEvent('–û—á–∏—â–µ–Ω–æ: –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–∞ localStorage', 'info')

          // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ localStorage –¢–û–õ–¨–ö–û –¥–ª—è –ì—Ä—É–ø–ø—ã 3
          if (selectedGroup === 'group1') {
            logEvent(
              '–í–∏–±—Ä–∞–Ω–æ –ì—Ä—É–ø–∞ 1: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ä–µ–∂–∏–º (–∑ –∑—ñ—Ä–∫–æ—é –Ω–∞ —è–∫—É –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏)',
              'info'
            )
          } else if (selectedGroup === 'group2') {
            // –ì—Ä—É–ø–ø–∞ 2: –∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞—Å—Ö–∞–ª–∫–∞ - –°–∞–Ω—Ç–∞ –ù–ï –ø–æ–π–º–∞–Ω
            logEvent(
              '–í–∏–±—Ä–∞–Ω–æ –ì—Ä—É–ø–∞ 2: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è + –ø—Ä–æ–ª—ñ—Ç–∞—é—á–∏–π –°–∞–Ω—Ç–∞',
              'info'
            )
          } else if (selectedGroup === 'group3') {
            // –ì—Ä—É–ø–ø–∞ 3: –ø–æ–π–º–∞–Ω–Ω–∞—è –ø–∞—Å—Ö–∞–ª–∫–∞ - –°–∞–Ω—Ç–∞ —É–∂–µ –ø–æ–π–º–∞–Ω
            localStorage.setItem('santaClicked', 'true')
            logEvent(
              '–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: santaClicked = true –≤ localStorage (–°–∞–Ω—Ç—É —Å–ø—ñ–π–º–∞–Ω–æ)',
              'info'
            )
            logEvent(
              '–í–∏–±—Ä–∞–Ω–æ –ì—Ä—É–ø–∞ 3: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –±–µ–∑ –ø—Ä–æ–ª—ñ—Ç–∞—é—á–æ–≥–æ –°–∞–Ω—Ç–∏ —ñ –±–µ–∑ –∑—ñ—Ä–∫–∏ –Ω–∞ —è–∫—É –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏',
              'info'
            )
          }

          // –û–±–Ω–æ–≤–ª—è–µ–º URL iframe —Å —É—á–µ—Ç–æ–º –≥—Ä—É–ø–ø—ã
          updateIframeUrl()

          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ debugZones –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ iframe
          widgetFrame.addEventListener('load', function sendDebugZonesState() {
            widgetFrame.contentWindow.postMessage(
              WIDGET_COMMANDS.SHOW_DEBUG_ZONES(debugZonesCheckbox.checked),
              '*'
            )
            widgetFrame.removeEventListener('load', sendDebugZonesState)
          })
        })
      })

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ debugZones –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å–ª–∏ iframe —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω)
      widgetFrame.addEventListener('load', function () {
        widgetFrame.contentWindow.postMessage(
          WIDGET_COMMANDS.SHOW_DEBUG_ZONES(debugZonesCheckbox.checked),
          '*'
        )
      })

      // –°–ª—É—à–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –≤–∏–¥–∂–µ—Ç–∞
      window.addEventListener('message', function (event) {
        if (event.data && event.data.source === 'santa-vegas-widget') {
          // –ö–ª–∏–∫ –ø–æ –°–∞–Ω—Ç–µ
          if (event.data.type === 'santaClicked') {
            logEvent('üéÖ –°–∞–Ω—Ç–∞ –∫–ª—ñ–∫–Ω—É—Ç–æ!', 'received')
            logEvent(
              '–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: santaClicked = true –≤ localStorage (–°–∞–Ω—Ç—É —Å–ø—ñ–π–º–∞–Ω–æ)',
              'info'
            )
            alert('–í–∏ —Å–ø—ñ–π–º–∞–ª–∏ –°–∞–Ω—Ç—É! üéÑ‚ú®')
          }
          // –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω
          if (event.data.type === 'sound_on') {
            logEvent('üîä –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω–æ', 'received')
          }
          // –ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω
          if (event.data.type === 'sound_off') {
            logEvent('üîá –ó–≤—É–∫ –≤–∏–º–∫–Ω–µ–Ω–æ', 'received')
          }
          // –°–∫—Ä—ã—Ç—å debug overlay –∑–≤–µ–∑–¥—ã
          if (event.data.type === 'hideStarDebugZone') {
            const debugOverlay = document.getElementById('debugOverlay')
            if (debugOverlay) {
              debugOverlay.style.display = 'none'
            }
          }
        }
      })

      // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      logEvent('–¢–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞. –û—á—ñ–∫—É—î–º–æ –ø–æ–¥—ñ—ó –≤—ñ–¥ –≤—ñ–¥–∂–µ—Ç–∞...', 'info')
    </script>
  </body>
</html>
